syntax = "proto3";
import "schema/v1/class.proto";

package schema.v1;

option go_package = "github.com/Runic-Studios/Trove/server/gen/api/schema/v1;v1";
option java_package = "com.runicrealms.trove.generated.api.schema.v1";
option java_multiple_files = true;

message ItemData {
  string templateID = 1;
  int32 count = 2;
  map<string, string> data = 3;
  repeated string lore = 4;
  oneof typeData {
    Armor armor = 5;
    Gem gem = 6;
    Trigger trigger = 7;
    Offhand offhand = 8;
    Weapon weapon = 9;
  }

  message Armor {
    int32 level = 1;
    ClassType classType = 2;
    RarityType rarity = 3;
    int32 health = 4;
    repeated Stat stats = 5;
    repeated GemBonus gemBonuses = 6;
    int32 maxGemSlots = 7;
    repeated Perk perks = 8;
  }

  message Gem {
    GemBonus bonus = 1;
  }

  message Trigger {
    optional string rightClickAction = 1;
    optional string shiftRightClickAction = 2;
    optional string leftClickAction = 3;
    optional string shiftLeftClickAction = 4;
  }

  message Offhand {
    int32 level = 1;
    repeated Stat stats = 2;
    RarityType rarity = 3;
    repeated Perk perks = 4;
  }

  message Weapon {
    int32 level = 1;
    ClassType class = 2;
    RarityType rarity = 3;
    int32 minDamage = 4;
    int32 maxDamage = 5;
    repeated Stat stats = 6;
    repeated Perk perks = 7;
    optional string skinID = 8;
  }

  enum RarityType {
    COMMON = 0;
    UNCOMMON = 1;
    RARE = 2;
    EPIC = 3;
    LEGENDARY = 4;
    UNIQUE = 5;
    CRAFTED = 6;
  }

  enum StatType {
    DEXTERITY = 0;
    INTELLIGENCE = 1;
    STRENGTH = 2;
    VITALITY = 3;
    WISDOM = 4;
  }

  message Stat {
    StatType type = 1;
    int32 minRange = 2;
    int32 maxRange = 3;
    double rollPercentage = 4;
  }

  message GemBonus {
    repeated Stat stats = 1;
    int32 health = 2;
    StatType mainStat = 3;
    int32 tier = 4;
  }

  message Perk {
    string perkID = 1;
    int32 stacks = 2;
  }
}
