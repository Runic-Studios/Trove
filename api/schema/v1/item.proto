syntax = "proto3";
import "schema/v1/class.proto";

package schema.v1;

option go_package = "github.com/Runic-Studios/Trove/server/gen/api/schema/v1;v1";
option java_package = "com.runicrealms.trove.generated.api.schema.v1";
option java_multiple_files = true;

message ItemData {
  string templateID = 1;
  int32 count = 2;
  map<string, string> data = 3;
  oneof typeData {
    ArmorItemData armor = 4;
    GemItemData gem = 5;
    TriggerItemData trigger = 6;
    OffhandItemData offhand = 7;
    WeaponItemData weapon = 8;
  }

  message ArmorItemData {
    int32 level = 1;
    ClassType classType = 2;
    ItemRarityType rarity = 3;
    int32 health = 4;
    repeated ItemRolledStat stats = 5;
    repeated ItemGemBonus gemBonuses = 6;
    int32 maxGemSlots = 7;
    repeated ItemPerk perks = 8;
  }

  message GemItemData {
    ItemGemBonus bonus = 1;
  }

  message TriggerItemData {
    optional string rightClickAction = 1;
    optional string shiftRightClickAction = 2;
    optional string leftClickAction = 3;
    optional string shiftLeftClickAction = 4;
  }

  message OffhandItemData {
    int32 level = 1;
    repeated ItemRolledStat stats = 2;
    ItemRarityType rarity = 3;
    repeated ItemPerk perks = 4;
  }

  message WeaponItemData {
    int32 level = 1;
    ClassType class = 2;
    ItemRarityType rarity = 3;
    int32 minDamage = 4;
    int32 maxDamage = 5;
    repeated ItemRolledStat stats = 6;
    repeated ItemPerk perks = 7;
    optional string skinID = 8;
  }

  enum ItemRarityType {
    COMMON = 0;
    UNCOMMON = 1;
    RARE = 2;
    EPIC = 3;
    LEGENDARY = 4;
    UNIQUE = 5;
    CRAFTED = 6;
  }

  enum ItemStatType {
    DEXTERITY = 0;
    INTELLIGENCE = 1;
    STRENGTH = 2;
    VITALITY = 3;
    WISDOM = 4;
  }

  message ItemRolledStat {
    ItemStatType type = 1;
    int32 minRange = 2;
    int32 maxRange = 3;
    double rollPercentage = 4;
  }

  message ItemStaticStat {
    ItemStatType type = 1;
    int32 amount = 2;
  }

  message ItemGemBonus {
    repeated ItemStaticStat stats = 1;
    int32 health = 2;
    ItemStatType mainStat = 3;
    int32 tier = 4;
  }

  message ItemPerk {
    string perkID = 1;
    int32 stacks = 2;
  }
}
